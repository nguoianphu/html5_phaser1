(function e(t,s,i){function o(l,a){if(!s[l]){if(!t[l]){var n="function"==typeof require&&require;if(!a&&n)return n(l,!0);if(h)return h(l,!0);throw Error("Cannot find module '"+l+"'")}var r=s[l]={exports:{}};t[l][0].call(r.exports,function(e){var s=t[l][1][e];return o(s?s:e)},r,r.exports,e,t,s,i)}return s[l].exports}for(var h="function"==typeof require&&require,l=0;i.length>l;l++)o(i[l]);return o})({1:[function(t){"use strict";window.onload=function(){var e=new Phaser.Game(320,480,Phaser.AUTO,"shmup");e.state.add("boot",t("./states/boot")),e.state.add("gameover",t("./states/gameover")),e.state.add("menu",t("./states/menu")),e.state.add("play",t("./states/play")),e.state.add("preload",t("./states/preload")),e.state.start("boot")}},{"./states/boot":2,"./states/gameover":3,"./states/menu":4,"./states/play":5,"./states/preload":6}],2:[function(t,e){"use strict";function s(){}s.prototype={preload:function(){this.load.image("preloader","assets/preloader.gif")},create:function(){this.game.input.maxPointers=1,this.stage.disableVisibilityChange=!0,this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,this.scale.hasResized.add(this.gameResized,this),this.scale.enterIncorrectOrientation.add(this.enterIncorrectOrientation,this),this.scale.leaveIncorrectOrientation.add(this.leaveIncorrectOrientation,this),this.scale.setScreenSize(!0),this.game.state.start("preload")},gameResized:function(){},enterIncorrectOrientation:function(){this.orientated=!1,document.getElementById("orientation").style.display="block"},leaveIncorrectOrientation:function(){this.orientated=!0,document.getElementById("orientation").style.display="none"}},e.exports=s},{}],3:[function(t,e){"use strict";function s(){}s.prototype={preload:function(){},create:function(){var t={font:"65px Arial",fill:"#ffffff",align:"center"};this.titleText=this.game.add.text(this.game.world.centerX,100,"Game Over!",t),this.titleText.anchor.setTo(.5,.5),this.congratsText=this.game.add.text(this.game.world.centerX,200,"You Win!",{font:"32px Arial",fill:"#ffffff",align:"center"}),this.congratsText.anchor.setTo(.5,.5),this.instructionText=this.game.add.text(this.game.world.centerX,300,"Click To Play Again",{font:"16px Arial",fill:"#ffffff",align:"center"}),this.instructionText.anchor.setTo(.5,.5)},update:function(){this.game.input.activePointer.justPressed()&&this.game.state.start("play")}},e.exports=s},{}],4:[function(t,e){"use strict";function s(){}s.prototype={preload:function(){},create:function(){this.sea=this.add.tileSprite(0,0,this.game.world.width,this.game.world.height,"sea"),this.enemy=this.game.add.sprite(this.game.width/2,50,"boss"),this.enemy.animations.add("fly",[0,1,2],20,!0),this.enemy.play("fly"),this.enemy.anchor.setTo(.5,.5),this.physics.enable(this.enemy,Phaser.Physics.ARCADE),this.player=this.add.sprite(this.game.width/2,400,"player"),this.player.anchor.setTo(.5,.5),this.player.animations.add("fly",[0,1,2],20,!0),this.player.play("fly"),this.physics.enable(this.player,Phaser.Physics.ARCADE),this.enemy.angle=-20,this.game.add.tween(this.enemy).to({angle:20},1e3,Phaser.Easing.Linear.NONE,!0,0,1e3,!0),this.player.angle=-20,this.game.add.tween(this.player).to({angle:20},1e3,Phaser.Easing.Linear.NONE,!0,0,1e3,!0);var t={font:"45px Arial",fill:"#ffffff",align:"center"};this.titleText=this.game.add.text(this.game.width/2,this.game.height/2-15,"Air War",t),this.titleText.anchor.setTo(.5,.5),this.instructionsText=this.game.add.text(this.game.width/2,this.game.height/2+15,"Click anywhere to play",{font:"12px Arial",fill:"#ffffff",align:"center"}),this.instructionsText.anchor.setTo(.5,.5)},update:function(){this.sea.tilePosition.y+=.6,this.game.input.activePointer.justPressed()&&this.game.state.start("play")}},e.exports=s},{}],5:[function(t,e){"use strict";function s(){}s.prototype={create:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.sea=this.add.tileSprite(0,0,this.game.world.width,this.game.world.height,"sea"),this.sea.autoScroll(0,12),this.explosionSFX=this.add.audio("explosion"),this.playerExplosionSFX=this.add.audio("playerExplosion"),this.enemyFireSFX=this.add.audio("enemyFire"),this.playerFireSFX=this.add.audio("playerFire"),this.powerUpSFX=this.add.audio("powerUp"),this.enemyPool=this.add.group(),this.enemyPool.enableBody=!0,this.enemyPool.physicsBodyType=Phaser.Physics.ARCADE,this.enemyPool.createMultiple(50,"greenEnemy"),this.enemyPool.setAll("anchor.x",.5),this.enemyPool.setAll("anchor.y",.5),this.enemyPool.setAll("outOfBoundsKill",!0),this.enemyPool.setAll("checkWorldBounds",!0),this.enemyPool.setAll("reward",100,!1,!1,0,!0),this.enemyPool.setAll("dropRate",.3,!1,!1,0,!0),this.enemyPool.forEach(function(t){t.animations.add("fly",[0,1,2],20,!0),t.animations.add("hit",[3,1,3,2],20,!1),t.events.onAnimationComplete.add(function(t){t.play("fly")},this)}),this.nextEnemyAt=0,this.enemyDelay=2e3,this.enemyInitialHealth=2,this.shooterPool=this.add.group(),this.shooterPool.enableBody=!0,this.shooterPool.physicsBodyType=Phaser.Physics.ARCADE,this.shooterPool.createMultiple(30,"whiteEnemy"),this.shooterPool.setAll("anchor.x",.5),this.shooterPool.setAll("anchor.y",.5),this.shooterPool.setAll("checkWorldBounds",!0),this.shooterPool.setAll("outOfBoundsKill",!0),this.shooterPool.setAll("reward",400,!1,!1,0,!0),this.shooterPool.setAll("dropRate",.5,!1,!1,0,!0),this.shooterPool.forEach(function(t){t.animations.add("fly",[0,1,2],20,!0),t.animations.add("hit",[3,1,3,2],20,!1),t.events.onAnimationComplete.add(function(t){t.play("fly")},this)}),this.nextShooterAt=this.time.now+5e3,this.shooterDelay=2e3,this.shooterShotDelay=3e3,this.shooterInitialHealth=3,this.bossPool=this.add.group(),this.bossPool.enableBody=!0,this.bossPool.physicsBodyType=Phaser.Physics.ARCADE,this.bossPool.createMultiple(1,"boss"),this.bossPool.setAll("anchor.x",.5),this.bossPool.setAll("anchor.y",.5),this.bossPool.setAll("checkWorldBounds",!0),this.bossPool.setAll("outOfBoundsKill",!0),this.bossPool.setAll("reward",1e4,!1,!1,0,!0),this.bossPool.setAll("dropRate",0,!1,!1,0,!0),this.bossPool.forEach(function(t){t.animations.add("fly",[0,1,2],20,!0),t.animations.add("hit",[3,1,3,2],20,!1),t.events.onAnimationComplete.add(function(t){t.play("fly")},this)}),this.boss=this.bossPool.getTop(),this.bossApproaching=!1,this.bossInitialHealth=50,this.player=this.add.sprite(this.game.width/2,this.game.height-20,"player"),this.player.anchor.setTo(.5,.5),this.player.animations.add("fly",[0,1,2],20,!0),this.player.animations.add("ghost",[3,0,3,1],20,!0),this.player.play("fly"),this.physics.enable(this.player,Phaser.Physics.ARCADE),this.player.speed=100,this.player.body.collideWorldBounds=!0,this.player.body.bounce.setTo(.3,.3),this.player.body.setSize(20,20,0,-5),this.weaponLevel=0,this.powerUpPool=this.add.group(),this.powerUpPool.enableBody=!0,this.powerUpPool.physicsBodyType=Phaser.Physics.ARCADE,this.powerUpPool.createMultiple(3,"powerup1"),this.powerUpPool.setAll("anchor.x",.5),this.powerUpPool.setAll("anchor.y",.5),this.powerUpPool.setAll("checkWorldBounds",!0),this.powerUpPool.setAll("outOfBoundsKill",!0),this.powerUpPool.setAll("reward",100,!1,!1,0,!0),this.bulletPool=this.add.group(),this.bulletPool.enableBody=!0,this.bulletPool.physicsBodyType=Phaser.Physics.ARCADE,this.bulletPool.createMultiple(100,"bullet"),this.bulletPool.setAll("anchor.x",.5),this.bulletPool.setAll("anchor.y",.5),this.bulletPool.setAll("checkWorldBounds",!0),this.bulletPool.setAll("outOfBoundsKill",!0),this.nextShotAt=0,this.shotDelay=800,this.enemyBulletPool=this.add.group(),this.enemyBulletPool.enableBody=!0,this.enemyBulletPool.physicsBodyType=Phaser.Physics.ARCADE,this.enemyBulletPool.createMultiple(100,"enemyBullet"),this.enemyBulletPool.setAll("anchor.x",.5),this.enemyBulletPool.setAll("anchor.y",.5),this.enemyBulletPool.setAll("checkWorldBounds",!0),this.enemyBulletPool.setAll("outOfBoundsKill",!0),this.enemyBulletPool.setAll("reward",0,!1,!1,0,!0),this.explosionPool=this.add.group(),this.explosionPool.enableBody=!0,this.explosionPool.physicsBodyType=Phaser.Physics.ARCADE,this.explosionPool.createMultiple(100,"explosion"),this.explosionPool.setAll("anchor.x",.5),this.explosionPool.setAll("anchor.y",.5),this.explosionPool.forEach(function(t){t.animations.add("boom")}),this.score=0,this.scoreText=this.add.text(this.game.world.width/2,30,""+this.score,{font:"20px monospace",fill:"#fff",align:"center"}),this.scoreText.anchor.setTo(.5,.5),this.lives=this.add.group();for(var t=0;3>t;t++){var e=this.lives.create(20+30*t,30,"player");e.scale.setTo(.5,.5),e.anchor.setTo(.5,.5)}},update:function(){if(this.sea.tilePosition.y+=.6,this.input.activePointer.isDown&&this.physics.arcade.distanceToPointer(this.player)>15&&(this.physics.arcade.moveToPointer(this.player,this.player.speed),this.returnText&&this.returnText.exists&&this.quitGame()),this.fire(),this.physics.arcade.overlap(this.player,this.enemyPool,this.playerHit,null,this),this.physics.arcade.overlap(this.bulletPool,this.enemyPool,this.enemyHit,null,this),this.physics.arcade.overlap(this.bulletPool,this.shooterPool,this.enemyHit,null,this),this.physics.arcade.overlap(this.player,this.shooterPool,this.playerHit,null,this),this.physics.arcade.overlap(this.player,this.enemyBulletPool,this.playerHit,null,this),this.physics.arcade.overlap(this.player,this.powerUpPool,this.playerPowerUp,null,this),this.nextEnemyAt<this.time.now&&this.enemyPool.countDead()>0){this.nextEnemyAt=this.time.now+this.enemyDelay;var t=this.enemyPool.getFirstExists(!1);t.reset(this.rnd.integerInRange(20,1004),0,this.enemyInitialHealth),t.body.velocity.y=this.rnd.integerInRange(30,60),t.play("fly"),t.checkWorldBounds=!0,t.outOfBoundsKill=!0}if(this.nextShooterAt<this.time.now&&this.shooterPool.countDead()>0){this.nextShooterAt=this.time.now+this.shooterDelay;var e=this.shooterPool.getFirstExists(!1);e.reset(this.rnd.integerInRange(20,1004),0,this.shooterInitialHealth);var s=this.rnd.integerInRange(20,1004);e.rotation=this.physics.arcade.moveToXY(e,s,768,this.rnd.integerInRange(30,100))-Math.PI/2,e.play("fly"),e.nextShotAt=0,e.checkWorldBounds=!0,e.outOfBoundsKill=!0}if(this.shooterPool.forEachAlive(function(t){if(this.time.now>t.nextShotAt&&this.enemyBulletPool.countDead()>0&&t.y<this.game.height-100&&t.x>0&&t.x<this.game.width){var e=this.enemyBulletPool.getFirstExists(!1);e.reset(t.x,t.y),this.physics.arcade.moveToObject(e,this.player,150),this.enemyFireSFX.play(),t.nextShotAt=this.time.now+this.shooterShotDelay}},this),this.bossApproaching===!1&&this.boss.alive&&this.boss.nextShotAt<this.time.now&&this.enemyBulletPool.countDead()>4){this.boss.nextShotAt=this.time.now+1e3,this.enemyFireSFX.play();for(var i=0;2>i;i++){var o=this.enemyBulletPool.getFirstExists(!1);o.reset(this.boss.x-10-10*i,this.boss.y+20);var h=this.enemyBulletPool.getFirstExists(!1);h.reset(this.boss.x+10+10*i,this.boss.y+20),this.boss.health>20?(this.physics.arcade.moveToObject(o,this.player,150),this.physics.arcade.moveToObject(h,this.player,150)):(this.physics.arcade.moveToXY(o,this.player.x-100*i,this.player.y,150),this.physics.arcade.moveToXY(h,this.player.x+100*i,this.player.y,150))}}this.ghostUntil&&this.ghostUntil<this.time.now&&(this.ghostUntil=null,this.player.play("fly")),this.showReturn&&this.time.now>this.showReturn&&(this.returnText=this.add.text(this.game.width/2,this.game.height/2+15,"Click anywhere to go back to Main Menu",{font:"12px Arial",fill:"#ffffff",align:"center"}),this.returnText.anchor.setTo(.5,.5),this.showReturn=!1),this.bossApproaching&&this.boss.y>80&&(this.bossApproaching=!1,this.boss.health=this.bossInitialHealth,this.boss.nextShotAt=0,this.boss.body.velocity.y=0,this.boss.body.velocity.x=200,this.boss.body.bounce.x=1,this.boss.body.collideWorldBounds=!0),this.bossApproaching===!1&&(this.physics.arcade.overlap(this.bulletPool,this.bossPool,this.enemyHit,null,this),this.physics.arcade.overlap(this.player,this.bossPool,this.playerHit,null,this))},fire:function(){if(this.player.alive&&!(this.nextShotAt>this.time.now)){this.nextShotAt=this.time.now+this.shotDelay;var t;if(0===this.weaponLevel){if(0===this.bulletPool.countDead())return;t=this.bulletPool.getFirstExists(!1),t.reset(this.player.x,this.player.y-20),t.body.velocity.y=-400}else{if(this.bulletPool.countDead()<2*this.weaponLevel)return;for(var e=0;this.weaponLevel>e;e++)t=this.bulletPool.getFirstExists(!1),t.reset(this.player.x-(10+6*e),this.player.y-20),this.physics.arcade.velocityFromAngle(-90-0*e,200,t.body.velocity),t=this.bulletPool.getFirstExists(!1),t.reset(this.player.x+(10+6*e),this.player.y-20),this.physics.arcade.velocityFromAngle(-90+0*e,200,t.body.velocity)}}},enemyHit:function(t,e){t.kill(),this.damageEnemy(e,1)},playerHit:function(t,e){if(!(this.ghostUntil&&this.ghostUntil>this.time.now)){this.playerExplosionSFX.play(),this.damageEnemy(e,5),this.weaponLevel>0&&(this.weaponLevel-=1);var s=this.lives.getFirstAlive();s?(s.kill(),this.ghostUntil=this.time.now+3e3,this.player.play("ghost")):(this.explode(t),t.kill(),this.displayEnd(!1))}},explode:function(t){if(0!==this.explosionPool.countDead()){var e=this.explosionPool.getFirstExists(!1);e.reset(t.x,t.y),e.play("boom",15,!1,!0),e.body.velocity.x=t.body.velocity.x,e.body.velocity.y=t.body.velocity.y}},damageEnemy:function(t,e){t.damage(e),t.alive?t.play("hit"):(this.explode(t),this.explosionSFX.play(),this.addToScore(t.reward),this.spawnPowerUp(t),"boss"===t.key&&(this.enemyPool.destroy(),this.shooterPool.destroy(),this.bossPool.destroy(),this.enemyBulletPool.destroy(),this.displayEnd(!0)))},addToScore:function(t){this.score+=t,this.scoreText.text=this.score,this.score>=5e3&&1==this.bossPool.countDead()&&this.spawnBoss()},displayEnd:function(t){if(!this.endText||!this.endText.exists){var e=t?"You Win!!!":"Game Over!";this.endText=this.add.text(this.game.width/2,this.game.height/2-15,e,{font:"45px Arial",fill:"#ffffff",align:"center"}),this.endText.anchor.setTo(.5,.5),this.showReturn=this.time.now+2e3}},spawnPowerUp:function(t){if(0!==this.powerUpPool.countDead()&&2!==this.weaponLevel&&this.rnd.frac()<t.dropRate){var e=this.powerUpPool.getFirstExists(!1);e.reset(t.x,t.y),e.body.velocity.y=100}},spawnBoss:function(){this.bossApproaching=!0,this.boss.reset(this.game.world.centerX,0,this.bossInitialHealth),this.game.physics.enable(this.boss,Phaser.Physics.ARCADE),this.boss.body.velocity.y=10,this.boss.play("fly")},playerPowerUp:function(t,e){this.addToScore(e.reward),e.kill(),this.powerUpSFX.play(),3>this.weaponLevel&&this.weaponLevel++},quitGame:function(){this.sea.destroy(),this.player.destroy(),this.enemyPool.destroy(),this.bulletPool.destroy(),this.explosionPool.destroy(),this.shooterPool.destroy(),this.enemyBulletPool.destroy(),this.powerUpPool.destroy(),this.bossPool.destroy(),this.scoreText.destroy(),this.endText.destroy(),this.returnText.destroy(),this.lives.destroy(),this.state.start("menu")}},e.exports=s},{}],6:[function(t,e){"use strict";function s(){this.asset=null,this.ready=!1}s.prototype={preload:function(){this.asset=this.add.sprite(this.game.world.width/2,this.game.world.height/2,"preloader"),this.asset.anchor.setTo(.5,.5),this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.load.setPreloadSprite(this.asset),this.load.image("sea","assets/sea.png"),this.load.image("bullet","assets/bullet.png"),this.load.image("enemyBullet","assets/enemy-bullet.png"),this.load.spritesheet("greenEnemy","assets/enemy.png",32,32),this.load.spritesheet("whiteEnemy","assets/shooting-enemy.png",32,32),this.load.spritesheet("boss","assets/boss.png",93,75),this.load.spritesheet("player","assets/player.png",64,64),this.load.image("powerup1","assets/powerup1.png"),this.load.spritesheet("explosion","assets/explosion.png",32,32),this.load.audio("explosion",["assets/explosion.wav"]),this.load.audio("playerExplosion",["assets/player-explosion.wav"]),this.load.audio("enemyFire",["assets/enemy-fire.wav"]),this.load.audio("playerFire",["assets/player-fire.wav"]),this.load.audio("powerUp",["assets/powerup.wav"])},create:function(){this.asset.cropEnabled=!1},update:function(){this.ready&&this.game.state.start("menu")},onLoadComplete:function(){this.ready=!0}},e.exports=s},{}]},{},[1]);